<!DOCTYPE html>
<html>
<head>
	<title>{{ page.title }}</title>
	<!-- link to main stylesheet -->
	<link rel="stylesheet" type="text/css" href="./css/main.css">
</head>
<body>
	<nav>
		<ul>
			<li><a href="./index.html">Stephen Hansen</a></li>
			<li><a href="./research.html">Research</a></li>
			<li><a href="./pdf_files/cv.pdf" target="_blank" rel="noopener noreferrer">CV</a></li>
		</ul>
	</nav>

	<div class="page-content">
		{{ content }}
	</div><!-- /.container -->
	
	<footer>
	<ul>
		<li><a href="https://github.com/sekhansen" target="_blank" rel="noopener noreferrer">Github</a></li>
		<li><a href="https://scholar.google.co.uk/citations?user=mXiyl7YAAAAJ&hl=en" target="_blank" rel="noopener noreferrer">Google Scholar</a></li>
		<li><a href="https://twitter.com/StephenEKHansen" target="_blank" rel="noopener noreferrer">Twitter</a></li>
	</ul>
	</footer>
</body>

<script>
// When mouse hovers on a paper title, expand

function handleTouchStart(event) {
    // Store coords when a touch starts
    this.startX = event.touches[0].clientX;
    this.startY = event.touches[0].clientY;
    this.isTap = true;
}

function handleTouchMove(event) {
    // Distance moved during touch
    var dx = event.touches[0].clientX-this.startX;
    var dy = event.touches[0].clientY-this.startY;
    var dist = dx**2+dy**2;
    // If touch moves significantly, consider it a scroll
    if (dist > 100) {
        this.isTap = false;
    }
}

function expandOnHover(event){
    // Don't handle click events on links
    if (event.target.tagName === "A"){
        return true;
    }

    // Only expand if it was a tap (on mobile) or mouse click
    if (this.isTap || typeof this.isTap === 'undefined') {
        event.preventDefault();
        // Expand to show description, links etc. on hover
        this.classList.toggle("active");
        var panel = this.querySelector(".summary");
        if (panel.style.maxHeight) {
            // collapse if already expanded
            panel.style.maxHeight = null;
        } else {
            // expand if currently collapsed
            // add some extra px to avoid border of coloured links being cut off - scrollheight rounds to nearest int
            panel.style.maxHeight = panel.scrollHeight + 5 + "px";
        }
    }
}

// Bind expand function to hover (pc) and touch (mobile) events for all papers
var papers = document.getElementsByClassName("paper");
for (var i = 0; i < papers.length; i++) {
    // Mouse events
    papers[i].addEventListener("mouseenter", expandOnHover);
    papers[i].addEventListener("mouseleave", expandOnHover);
    // Touchscreen events
    papers[i].addEventListener("touchstart", handleTouchStart);
    papers[i].addEventListener("touchmove", handleTouchMove);
    papers[i].addEventListener("touchend", expandOnHover);
}
</script>

</html>